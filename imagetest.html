<!DOCTYPE html>
<html>
<head>
    <title>Image Loading Test</title>
    <style>
        .test-case {
            margin: 20px;
            padding: 20px;
            border: 1px solid #ccc;
        }
        .image-container {
            width: 300px;
            height: 225px;
            border: 1px solid #eee;
            margin: 10px 0;
        }
        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        .success {
            color: green;
        }
        .error {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Image Loading Test Cases</h1>

    <div class="test-case">
        <h3>Test 1: Direct Drive Link</h3>
        <p>Testing a direct Google Drive link</p>
        <div class="image-container">
            <img src="https://drive.google.com/file/d/SAMPLE_ID/view" 
                 onerror="this.parentElement.innerHTML += '<p class=\'error\'>❌ Failed to load</p>'"
                 onload="this.parentElement.innerHTML += '<p class=\'success\'>✓ Loaded successfully</p>'">
        </div>
    </div>

    <div class="test-case">
        <h3>Test 2: Modified Drive Link (Preview)</h3>
        <p>Testing with /preview instead of /view</p>
        <div class="image-container">
            <img src="https://drive.google.com/file/d/SAMPLE_ID/preview"
                 onerror="this.parentElement.innerHTML += '<p class=\'error\'>❌ Failed to load</p>'"
                 onload="this.parentElement.innerHTML += '<p class=\'success\'>✓ Loaded successfully</p>'">
        </div>
    </div>

    <div class="test-case">
        <h3>Test 3: Embedding via iframe</h3>
        <p>Testing Google Drive embed approach</p>
        <iframe src="https://drive.google.com/file/d/SAMPLE_ID/preview" 
                width="300" 
                height="225"
                allow="autoplay"></iframe>
    </div>

    <div class="test-case">
        <h3>Test 4: Using Export Link</h3>
        <p>Testing export=view parameter</p>
        <div class="image-container">
            <img src="https://drive.google.com/uc?export=view&id=SAMPLE_ID"
                 onerror="this.parentElement.innerHTML += '<p class=\'error\'>❌ Failed to load</p>'"
                 onload="this.parentElement.innerHTML += '<p class=\'success\'>✓ Loaded successfully</p>'">
        </div>
    </div>

    <script>
        // Function to test a URL transformation
        function testImageUrl(originalUrl) {
            // Test different transformations
            const transformations = {
                preview: url => url.replace('/view?usp=drivesdk', '/preview'),
                export: url => {
                    const id = url.match(/\/d\/(.*?)\/view/)?.[1];
                    return id ? `https://drive.google.com/uc?export=view&id=${id}` : url;
                },
                embed: url => {
                    const id = url.match(/\/d\/(.*?)\/view/)?.[1];
                    return id ? `https://drive.google.com/file/d/${id}/preview` : url;
                }
            };

            console.log('Original URL:', originalUrl);
            Object.entries(transformations).forEach(([name, transform]) => {
                console.log(`${name} transformation:`, transform(originalUrl));
            });
        }

        // Add a test function
        window.testUrl = function(url) {
            console.log('Testing URL:', url);
            testImageUrl(url);
        };
    </script>

    <div class="test-case">
        <h3>URL Tester</h3>
        <p>Open console and use testUrl('your-drive-url') to test transformations</p>
        <input type="text" id="urlInput" style="width: 100%; margin: 10px 0;" 
               placeholder="Paste Google Drive URL here">
        <button onclick="testUrl(document.getElementById('urlInput').value)">
            Test URL
        </button>
    </div>
</body>
</html>
